/**
 * ngCssInjector 0.2.2
 * https://github.com/CristianMR/ngcssinjector
 * (c) Cristian Martín Rios 2014 | License MIT
 * Based on angular-css-injector v1.0.4, copyright (c) 2013 Gabriel Delépine
 */
"use strict";angular.module("ngCssInjector",[]).provider("cssInjector",[function(){function e(e,r,n,o){var i={},s={},a=n("orderBy");r.$on("$locationChangeStart",function(){t===!0&&u()});var l=function(t){var r=!1;if("object"==typeof t){if(!t.href)return;r=t,r.disabled=!1,t=t.href}if(s[t])return d(t),!1;var n=r||{disabled:!1,href:t};o.injectedStylesheets.push(n),o.orderByExpression&&(o.injectedStylesheets=a(o.injectedStylesheets,o.orderByExpression)),s[t]=n;var l=e.defer();return i[t]=l,l.promise},c=function(t){for(var r=e.defer(),n=[],o=0;o<t.length;o++){var i=l(t[o]);i&&n.push(i)}return e.all(n).then(r.resolve,r.reject),r.promise},d=function(e){"object"==typeof e&&(e=e.href),s[e]&&(s[e].disabled=!1)},f=function(e){"object"==typeof e&&(e=e.href),s[e]&&(s[e].disabled=!0)},h=function(e){if(s)for(var t=0;t<e.length;t++)f(e[t])},u=function(){if(s)for(var e=0;e<s.length;e++)f(s[e])},y=function(e){if(s&&s[e]){delete s[e];for(var t=0;t<o.injectedStylesheets.length;t++)if(o.injectedStylesheets[t].href===e){o.injectedStylesheets.splice(t,1);break}}},v=function(e){for(var t=0;t<e.lenght;t++)y(e[t])},p=function(){s={},o.injectedStylesheets=[]},g=function(e){i[e]&&(i[e].resolve(),delete i[e])};return{add:l,addMany:c,disable:f,disableMany:h,disableAll:u,remove:y,removeAll:p,removeMany:v,loaded:g}}var t=!1,r=!1;this.$get=["$q","$compile","$filter","$timeout","$rootScope",function(t,n,o,i,s){var a=angular.element(document.getElementsByTagName("head")[0]),l=a.scope();if(void 0===l)throw"ngCssInjector error : Please initialize your app in the HTML tag and be sure your page has a HEAD tag.";return l.injectedStylesheets=[],l.orderByExpression=r,i(function(){a.append(n("<link data-ng-repeat='href in injectedStylesheets track by href.href' data-ng-href='{{href.href}}' value='href.disabled' css-injector-callback rel='stylesheet'/>")(l))}),new e(t,s,o,l)}],this.setSinglePageMode=function(e){return t=e,this},this.setOrderByExpression=function(e){r=e}}]).directive("cssInjectorCallback",["cssInjector",function(e){return{scope:{value:"="},link:function(t,r,n){t.$watch("value",function(e){r[0].disabled=e}),r.bind("load",function(){e.loaded(n.href)}),r.bind("error",function(){console.error("CSS INJECTOR: CSS NOT FOUND:",n.href),e.loaded(n.href)})}}}]);