
<span class="tableheader">Definitions</span>
<div class="container" ng-init="getDefinitions()">

  <!-- search box -->
  <input type="search" class="form-control definitionsearch" placeholder="Search by Word" ng-model="filterBox">

  <table class="filegroup nomargin fullwidth">
    <colgroup>
      <col span="1" style="width: 5%;">
      <col span="1" style="width: 20%;">
      <col span="1" style="width: 45%;">
      <col span="1" style="width: 15%;">
      <col span="1" style="width: 10%;">
      <col span="1" style="width: 5%;">
    </colgroup>
      <thead> 
        <tr class="noborder"> 
          <th></th>
          <th>Word</th>
          <th>Definition</th>
          <th>Source</th>
          <th>Website</th>
          <th></th>
        </tr> 
      </thead> 
    </table> 

  <scrollable>
    <table class="filegroup nomargin fullwidth">
       <colgroup>
        <col span="1" style="width: 5%;">
        <col span="1" style="width: 20%;">
        <col span="1" style="width: 45%;">
        <col span="1" style="width: 15%;">
        <col span="1" style="width: 10%;">
        <col span="1" style="width: 5%;">
      </colgroup>
      

      <tbody> 
        <tr ng-repeat="definition in definitions | filter:{ filetype: file.type }| filter:filterBox | orderBy: '-updated_at'"> 
          <td>
            <a ng-click="closeThisDialog(); addDefinition(definition)" class="choose">
              <span class="icon-enter"></span>
            </a>
          </td>
          <td>
            <!-- new definition -->
            <textarea ng-show="showNewFocus && $index === 0 && !definition._id" type="text" placeholder="Word" ng-model="definition.word" class="form-control" ng-blur="showNewFocus = false" focus-on-visibility></textarea>

            <!-- existing definition -->
            <ms-table-input ng-show="!showNewFocus || $index > 0 || definition._id" ng-model="definition.word"></ms-table-input>
          </td> 

          <td>
            <ms-table-input ng-model="definition.text"></ms-table-input>
          </td>

          <td>
            <input type="text" placeholder="Source" ng-model="definition.author" ng-class="authorClass" ng-init="authorClass = ['def-table-entries']" ng-blur="authorClass = ['def-table-entries']" ng-focus="authorClass = ['form-control']" ng-change="onDefinitionChange()">
          </td>

          <td>
            <input type="text" placeholder="Website" ng-model="definition.url" ng-class="urlClass" ng-init="urlClass = ['def-table-entries']" ng-blur="urlClass = ['def-table-entries']" ng-focus="urlClass = ['form-control']" ng-change="onDefinitionChange()">
          </td>

          <!-- remove -->
          <td>
            <button type="button" class="btn btn-default" ng-click="onRemoveDefinitionClick(definition._id)">
              <span class="icon-trash"></span>
            </button>
          </td>

        </tr><!-- end repeat -->
        
      </tbody> 
    </table>
  </scrollable>
    
  <img class="plusposition" ng-click="onCreateDefinitionClick(); showNewFocus = true; filterBox = ''" src="../images/plus.png" width="50" />   
   
</div>
